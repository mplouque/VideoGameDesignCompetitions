package  {		import flash.display.MovieClip;	import flash.events.Event;	import ReusableCode.MyMath;	import Engine;			public class crateBlock extends MovieClip	{		public var radius:Number;		public var characterXPosistionBeforeHit:Number		public var distanceInsideTile:Number;		public var touchingLeft:Boolean;		public var touchingRight:Boolean;		public var touchingTop:Boolean;		public var touchingBottom:Boolean;		public var touchingTopBoundary:Boolean;		public var touchingBottomBoundary:Boolean;		public var touchingLeftBoundary:Boolean;		public var touchingRightBoundary:Boolean;		public var touchingXSides:Boolean;		public var touchingYSides:Boolean;		public var ableToCheckYSides:Boolean;		public var ableToCheckXSides:Boolean;		private var _root:MovieClip;		public const TILESIZE:int=63;		public function crateBlock() 		{			_root = MovieClip(root);//defining the root			addEventListener(Event.ENTER_FRAME, crateBlockUpdate);			radius=31.5;			touchingLeft=false;			touchingRight=false;			touchingTop=false;			touchingBottom=false;			touchingXSides=false;			touchingYSides=false;			ableToCheckYSides=true;			ableToCheckXSides=true;			// constructor code		}				public function crateBlockUpdate(e:Event)		{			//trace("added");			handleHits();			handleCrateMovement();			handleCrateBoundaries();			handleCharWhileTouchingBoundary();			handleGrabs();							   		}				function handleCrateBoundaries()		{				if ((this).x<=TILESIZE) 					{						(this).x=TILESIZE;						touchingLeftBoundary=true;					}				else if ((this).x>=stage.stageWidth-TILESIZE*2) 					{						(this).x=stage.stageWidth-TILESIZE*2;						touchingRightBoundary=true;						//trace("toucing");					}				else 				{					touchingLeftBoundary=false;					touchingRightBoundary=false;				}				if ((this).y<=TILESIZE) 					{						(this).y=TILESIZE;						touchingTopBoundary=true;					}				else if ((this).y>=stage.stageHeight-TILESIZE*2) 					{						(this).y=stage.stageHeight-TILESIZE*2;						touchingBottomBoundary=true;					}				else 				{					touchingTopBoundary=false;					touchingBottomBoundary=false;				}						}				function handleCharWhileTouchingBoundary ()			{								if (touchingRightBoundary==true)				{					//trace("touching right");					//if character is on the left side dont allow it to pass through crate					if (touchingLeft)					{												if (touchingTop==false && touchingBottom==false)						{							_root.mcChar.x=(this).x-63.5;						}					}				}				if (touchingLeftBoundary==true)				{					//trace("touching right");					//if character is on the left side dont allow it to pass through crate					if (touchingRight)					{												if (touchingTop==false && touchingBottom==false)						{							_root.mcChar.x=(this).x+63.5;						}					}				}				if (touchingTopBoundary==true)				{										if (touchingBottom)					{						_root.mcChar.y=(this).y+63.5;											}				}				if (touchingBottomBoundary==true)				{										if (touchingTop)					{						_root.mcChar.y=(this).y-63.5;											}				}							}				public function handleCrateMovement()		{			//if it touches a side tell it to move with it			if(touchingTop)			{								 if((this).x-_root.mcChar.x >=-63 && (this).x-_root.mcChar.x<=63)				{					if (_root.mcChar.downKey==true)					{						(this).y=_root.mcChar.y+63.5;					}					else if (_root.mcChar.upKey==true)					{						if (_root.mcChar.grabbing==true)						{							(this).y=_root.mcChar.y+63.5;						}						else						{							touchingTop=false;						}					}									}				else 				{					touchingTop=false;					touchingBottom=false;					touchingLeft=false;					touchingRight=false;				}														}			else if(touchingBottom)			{				if((this).x-_root.mcChar.x >=-63 && (this).x-_root.mcChar.x<=63)				{					if (_root.mcChar.upKey==true)					{						(this).y=_root.mcChar.y-63.5;					}					else if(_root.mcChar.downKey==true)					{						if (_root.mcChar.grabbing==true)						{							(this).y=_root.mcChar.y-63.5;						}						else						{							touchingBottom=false;						}					}									}				else 				{					touchingTop=false;					touchingBottom=false;					touchingLeft=false;					touchingRight=false;				}															}			else if(touchingLeft)			{				if((this).y-_root.mcChar.y >=-63 && (this).y-_root.mcChar.y<=63)				{					if (_root.mcChar.rightKey==true)					{						(this).x=_root.mcChar.x+63.5;					}					else if(_root.mcChar.leftKey==true)					{						if (_root.mcChar.grabbing==true)						{							trace("woopty");							(this).x=_root.mcChar.x+63.5;													}						else 						{							touchingLeft=false;						}					}				}				else 				{					touchingTop=false;					touchingBottom=false;					touchingLeft=false;					touchingRight=false;				}															}			else if(touchingRight)			{								if((this).y-_root.mcChar.y >=-63 && (this).y-_root.mcChar.y<=63)				{					if  (_root.mcChar.leftKey==true)					{						(this).x=_root.mcChar.x-63;					}					else if(_root.mcChar.rightKey==true)					{						if (_root.mcChar.grabbing==true)						{							(this).x=_root.mcChar.x-63.5;						}						else 						{							touchingRight=false;						}					}									}				else 				{					touchingTop=false;					touchingBottom=false;					touchingLeft=false;					touchingRight=false;				}							}			else			{				touchingTop=false;				touchingBottom=false;				touchingRight=false;				touchingLeft=false;			}		}				function handleGrabs ()		{					}				function handleHits()		{			//trace(ableToCheckYSides);			ableToCheckSides();												     											}		function ableToCheckSides()		{									if ((this).x-_root.mcChar.x<63.5 && (this).x-_root.mcChar.x>-63.5)			{				//trace("booty");				//ableToCheckXSides=false;				if((this).y-_root.mcChar.y >=-63 && (this).y-_root.mcChar.y<0 && ableToCheckXSides==false)					   {						//ableToCheckXSides=false;   						//_root.mcChar.x=_root.mcChar.x;												if(hitTestObject(_root.mcChar)==true)							{																touchingBottom=true;															}																								 //if char is moving up and hits the bottom side of tile						  					   }					 else if((this).y-_root.mcChar.y<=63 && (this).y-_root.mcChar.y>0 && ableToCheckXSides==false)					   {						//ableToCheckXSides=false;						//_root.mcChar.x=_root.mcChar.x;						if(hitTestObject(_root.mcChar)==true)							{																touchingTop=true;															}																								 //if char is moving up and hits the bottom side of tile						  					   }							}									if ((this).y-_root.mcChar.y<63.5 && (this).y-_root.mcChar.y>-63.5)			{												ableToCheckXSides=true;				if((this).x-_root.mcChar.x >=-63 && (this).x-_root.mcChar.x<0)					   {												//ableToCheckYSides=false;						if(hitTestObject(_root.mcChar)==true)							{																touchingRight=true;							}																		 //if char is moving left and hits the right side of tile											   }					   else if((this).x-_root.mcChar.x<=63 && (this).x-_root.mcChar.x>0)					   {						//ableToCheckYSides=false;						if(hitTestObject(_root.mcChar)==true)							{																touchingLeft=true;															}																		 //if char is moving right and hits the left side of tile   					   }			}			else 			{				ableToCheckXSides=false;			}								}	}	}